window.__require=function t(i,o,e){function n(r,h){if(!o[r]){if(!i[r]){var a=r.split("/");if(a=a[a.length-1],!i[a]){var c="function"==typeof __require&&__require;if(!h&&c)return c(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var d=o[r]={exports:{}};i[r][0].call(d.exports,function(t){return n(i[r][1][t]||t)},d,d.exports,t,i,o,e)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<e.length;r++)n(e[r]);return n}({Food:[function(t,i,o){"use strict";cc._RF.push(i,"cf7c4KVmWJIwp00SUWIIwNQ","Food"),Object.defineProperty(o,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,s=e.property,r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.lab=null,i}return __extends(i,t),i.prototype.start=function(){},i.prototype.onCollisionEnter=function(t){var i=t.node.name;"head"==i?(this.node.active=!1,this._delt.AEatFood(1),t.node.getComponent("Head").getNewBody()):"headAI"==i&&(this.node.active=!1,this._delt.BEatFood(2),t.node.getComponent("HeadAI").getNewBody())},i.prototype.init=function(t){this._delt=t},__decorate([s(cc.Label)],i.prototype,"lab",void 0),__decorate([n],i)}(cc.Component);o.default=r,cc._RF.pop()},{}],HeadAI:[function(t,i,o){"use strict";cc._RF.push(i,"d2e66xk161Gna1lxCc7EUur","HeadAI"),Object.defineProperty(o,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,s=e.property,r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bodyPrefab=null,i.bodyNum=2,i.sectionLen=24,i.dir=null,i.speed=2,i.snakeArray=[],i.pointsArray=[],i}return __extends(i,t),i.prototype.onLoad=function(){},i.prototype.start=function(){},i.prototype.update=function(t){this.dir&&(this.rotateHead(this.dir),this.moveSnake(t))},i.prototype.init=function(){for(var t=this.node.parent.children,i=1;i<t.length;i++)t[i].active=!1;for(this.node.active=!0,this.node.color=this.randomColor(),this.node.setPosition(this.randomPos()),this.rotateHead(this.node.position),this.snakeArray=[],this.snakeArray.push(this.node),i=1;i<=this.bodyNum;i++)this.getNewBody();this.dir=null,this.pointsArray=[]},i.prototype.randomColor=function(){return Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),new cc.Color(66,66,66)},i.prototype.randomPos=function(){var t=this.node.parent.parent.width,i=this.node.parent.parent.height;return Math.round(Math.random()*t),Math.round(Math.random()*i),cc.v2(100.5,100.5)},i.prototype.getNewBody=function(){var t=this.node.parent.children,i=null;if(this.snakeArray.length>=t.length?(i=cc.instantiate(this.bodyPrefab),this.node.parent.addChild(i)):(i=t[this.snakeArray.length]).active=!0,1==this.snakeArray.length){var o=this.node.position.normalize();i.setPosition(this.node.position.sub(o.mul(this.sectionLen)))}else{var e=this.snakeArray[this.snakeArray.length-1];o=this.snakeArray[this.snakeArray.length-2].position.sub(e.position).normalize(),i.setPosition(e.position.sub(o.mul(this.sectionLen)))}i.color=this.node.color,this.snakeArray.push(i)},i.prototype.rotateHead=function(t){var i=180*cc.v2(1,0).signAngle(t)/Math.PI;this.node.angle=i-90},i.prototype.moveSnake=function(){var t=this.dir.mul(this.speed);this.node.setPosition(this.node.position.add(t)),this.pointsArray.push(this.node.position);for(var i=this.sectionLen/this.speed,o=1;o<this.snakeArray.length;o++)if(this.pointsArray.length<=i*o){var e=this.snakeArray[this.snakeArray.length-1];t=this.snakeArray[this.snakeArray.length-2].position.sub(e.position).normalize().mul(this.speed),this.snakeArray[o].setPosition(this.snakeArray[o].position.add(t))}else this.snakeArray[o].setPosition(this.pointsArray[this.pointsArray.length-i*o]);this.pointsArray.length>i*(this.snakeArray.length-1)&&this.pointsArray.splice(0,1)},__decorate([s(cc.Prefab)],i.prototype,"bodyPrefab",void 0),__decorate([n],i)}(cc.Component);o.default=r,cc._RF.pop()},{}],Head:[function(t,i,o){"use strict";cc._RF.push(i,"57037vKzrpGT5v1lPiHcdIs","Head"),Object.defineProperty(o,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,s=e.property,r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bodyPrefab=null,i.bodyNum=2,i.sectionLen=24,i.dir=null,i.speed=3,i.snakeArray=[],i.pointsArray=[],i}return __extends(i,t),i.prototype.onLoad=function(){},i.prototype.start=function(){},i.prototype.update=function(t){this.dir&&(this.rotateHead(this.dir),this.moveSnake(t))},i.prototype.init=function(){for(var t=this.node.parent.children,i=1;i<t.length;i++)t[i].active=!1;for(this.node.active=!0,this.node.color=this.randomColor(),this.node.setPosition(this.randomPos()),this.rotateHead(this.node.position),this.snakeArray=[],this.snakeArray.push(this.node),i=1;i<=this.bodyNum;i++)this.getNewBody();this.dir=null,this.pointsArray=[]},i.prototype.randomColor=function(){return Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),new cc.Color(188,188,188)},i.prototype.randomPos=function(){var t=this.node.parent.parent.width,i=this.node.parent.parent.height;return Math.round(Math.random()*t),Math.round(Math.random()*i),cc.v2(-.5,.5)},i.prototype.getNewBody=function(){var t=this.node.parent.children,i=null;if(this.snakeArray.length>=t.length?(i=cc.instantiate(this.bodyPrefab),this.node.parent.addChild(i)):(i=t[this.snakeArray.length]).active=!0,1==this.snakeArray.length){var o=this.node.position.normalize();i.setPosition(this.node.position.sub(o.mul(this.sectionLen)))}else{var e=this.snakeArray[this.snakeArray.length-1];o=this.snakeArray[this.snakeArray.length-2].position.sub(e.position).normalize(),i.setPosition(e.position.sub(o.mul(this.sectionLen)))}i.color=this.node.color,this.snakeArray.push(i)},i.prototype.rotateHead=function(t){var i=180*cc.v2(1,0).signAngle(t)/Math.PI;this.node.angle=i-90},i.prototype.moveSnake=function(){var t=this.dir.mul(this.speed);this.node.setPosition(this.node.position.add(t)),this.pointsArray.push(this.node.position);for(var i=this.sectionLen/this.speed,o=1;o<this.snakeArray.length;o++)if(this.pointsArray.length<=i*o){var e=this.snakeArray[this.snakeArray.length-1];t=this.snakeArray[this.snakeArray.length-2].position.sub(e.position).normalize().mul(this.speed),this.snakeArray[o].setPosition(this.snakeArray[o].position.add(t))}else this.snakeArray[o].setPosition(this.pointsArray[this.pointsArray.length-i*o]);this.pointsArray.length>i*(this.snakeArray.length-1)&&this.pointsArray.splice(0,1)},__decorate([s(cc.Prefab)],i.prototype,"bodyPrefab",void 0),__decorate([n],i)}(cc.Component);o.default=r,cc._RF.pop()},{}],Joystick:[function(t,i,o){"use strict";cc._RF.push(i,"6149adMA0RGRYZnf9RY0/Ts","Joystick"),Object.defineProperty(o,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,s=e.property,r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.player=null,i.maxSpeed=5,i.canMove=!1,i}return __extends(i,t),i.prototype.onLoad=function(){this.joyStickBtn=this.node.children[0],this.dir=cc.v2(0,0),this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchCancel,this)},i.prototype.onDestroy=function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this),this.node.off("touchcancel",this.onTouchCancel,this)},i.prototype.start=function(){},i.prototype.update=function(){var t=this.joyStickBtn.position.mag()/(this.node.width/2);t>1&&(this.joyStickBtn.setPosition(this.joyStickBtn.position.div(t)),t=1)},i.prototype.onTouchStart=function(t){if(this.canMove){var i=this.node.convertToNodeSpaceAR(t.getLocation());this.joyStickBtn.setPosition(i)}},i.prototype.onTouchMove=function(t){if(this.canMove){var i=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(i)),this.dir=this.joyStickBtn.position.normalize(),this.player.getComponent("Head").dir=this.dir}},i.prototype.onTouchEnd=function(){this.joyStickBtn.setPosition(cc.v2(0,0))},i.prototype.onTouchCancel=function(){this.joyStickBtn.setPosition(cc.v2(0,0))},__decorate([s(cc.Node)],i.prototype,"player",void 0),__decorate([n],i)}(cc.Component);o.default=r,cc._RF.pop()},{}],Main:[function(t,i,o){"use strict";cc._RF.push(i,"76c3bvgAgBEcKkzbsxiZ+XC","Main"),Object.defineProperty(o,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,s=e.property,r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ndJoystick=null,i.ndBg=null,i.goSurvive=null,i.snakeB=null,i.snake=null,i.food=null,i.ball=null,i.tips=null,i.intro=null,i.orient=null,i.share=null,i.sp1=null,i.sp2=null,i.sp3=null,i.labIntro=null,i.labTime=null,i.labSize=null,i.labSizeB=null,i.bgAudio=null,i.audioWin=null,i.audioLose=null,i}return __extends(i,t),i.prototype.onLoad=function(){},i.prototype.start=function(){cc.director.getCollisionManager().enabled=!0,this.initCanvas(),this.initParas(),this.initEvent(),this.initShow(),this.playIntro()},i.prototype.update=function(t){1==this._bMove&&(this.playSnakeB(),this._iTimeA+=t,this._iTimeB+=t,this._iTimeA>=3&&(this._iSize--,this.showSize(),this._iTimeA=0),this._iTimeB>=5&&(this._iSizeB--,this.showSizeB(),this._iTimeB=0),(this.snake.y>480-this._iSnake||this.snake.y<-(560-this._iSnake)||this.snake.x>360-this._iSnake||this.snake.x<-(360-this._iSnake))&&(this.snake.getComponent("Head").dir=null,this._iSize=0),(this._iSize<=0||this._iSizeB<=0)&&(this._bStart=!1,this._bMove=!1,this._bPlayTime=!1,this.snake.getComponent("Head").dir=null,this.ndJoystick.getComponent("Joystick").canMove=!1,1==this._iLife?(this.goSurvive.active=!0,null!=this.bannerAd&&this.bannerAd.show()):this.playSPTips("\u83dc\u9e21! \u5b58\u6d3b\uff1a"+this.labTime.string),this.playSound("lose"),this.labTime.unschedule(this.coPlayTime)))},i.prototype.AEatFood=function(t){this._iSize+=t,this._iSize>5&&(this._iSize=5),this.showSize(),this.eatFood()},i.prototype.BEatFood=function(t){this._iSizeB+=t,this._iSizeB>5&&(this._iSizeB=5),this.showSizeB(),this.eatFood()},i.prototype.eatFood=function(){this._iFood--,0==this._iFood&&this.initFood()},i.prototype.onSurvive=function(){this.ndJoystick.getComponent("Joystick").canMove=!0,this._bStart=!0,this._bMove=!0,this._bPlayTime=!0,this.tips.opacity=0,this.labTime.schedule(this.coPlayTime,1),this._iDelayTime=0,this._iSize=5,this._iSizeB=5,this.showSize(),this.showSizeB(),this.goSurvive.active=!1,this._iLife=0,null!=this.bannerAd&&this.bannerAd.hide()},i.prototype.initCanvas=function(){var t=this.node.getComponent(cc.Canvas),i=t.designResolution,o=cc.view.getFrameSize(),e=!1;cc.sys.os==cc.sys.OS_IOS?e=414==o.width&&896==o.height||375==o.width&&812==o.height||390==o.width&&844==o.height||428==o.width&&926==o.height:cc.sys.os==cc.sys.OS_ANDROID&&(e=363==o.width&&797==o.height),e?(t.fitWidth=!0,t.fitHeight=!0):o.width/o.height>=i.width/i.height?(t.fitWidth=!1,t.fitHeight=!0):(t.fitWidth=!0,t.fitHeight=!1)},i.prototype.initParas=function(){this._iLife=1,this._iFood=0,this._tStep=[],this._tStepB=[],this.dx=0,this.dy=100,this._iSnake=this.snake.width/2,this._bMove=!1,this._bStop=!1,this._iTime=0,this._iDelayTime=0,this._iSize=5,this._iSizeB=5,this._iTimeA=0,this._iTimeB=0,this._iIntro=0,this._bPlayTime=!1,this._tFood=[],this._bStart=!1;for(var t=cc.find("food",this.ndBg).children,i=0;i<t.length;i++){var o=t[i];o.getComponent("Food").init(this),this._tFood.push(o)}this._iFood=this._tFood.length,this.tStr=[],this.tStr.push("\u86c7\u4e4b\u5927\u9646\u7206\u53d1\u4e86\u4e27\u5c38\u75c5\u6bd2\u3002\u3002\u3002"),this.tStr.push("\u5c0f\u9752\u611f\u67d3\u4e86\u4e27\u5c38\u75c5\u6bd2\uff0c\u53d8\u6210\u4e86\u4e27\u5c38\u3002\u3002\u3002"),this.tStr.push("\u5c0f\u767d\u5bf9\u5c0f\u9752\u4f9d\u7136\u4e0d\u79bb\u4e0d\u5f03\uff0c\u8270\u96be\u6c42\u751f\u3002\u3002\u3002")},i.prototype.initEvent=function(){cc.find("restart",this.goSurvive).on("click",function(){this.goSurvive.active=!1,null!=this.bannerAd&&this.bannerAd.hide()},this),cc.find("survive",this.goSurvive).on("click",function(){this.onWxEvent("showVideo")},this);var t=cc.find("down",this.node);this.intro.on("click",function(){this._iIntro>=3?(this.intro.active=!1,this.playTips("\u5c0f\u97521\u79d2\u540e\u75c5\u53d8"),this.scheduleOnce(this.onStart,1),this.bgAudio.play()):this.playIntro()},this),cc.find("start",t).on("click",function(){this.onStart()},this),CC_WECHATGAME&&(this.share.active=!0,this.share.on("click",function(){this.tips.opacity<255||(this.playSound("click"),this.onWxEvent("share"))},this),this.onWxEvent("initBanner"),this.onWxEvent("initVideo"))},i.prototype.initShow=function(){this.sp1.active=!1,this.sp2.active=!1,this.sp3.active=!1,this.intro.active=!0,this.labTime.string="00:00",this.showSize();for(var t=0;t<this._tFood.length;t++)this._tFood[t].active=!1},i.prototype.onStart=function(){this.ndJoystick.getComponent("Joystick").canMove=!0,this._iLife=1,this.tips.opacity=0,this.ndBg.setPosition(cc.v2(0,0)),this._bStart=!0,this._bStop=!1,this.snake.getComponent("Head").init(),this.snakeB.getComponent("HeadAI").init(),this._iTimeA=0,this._iTimeB=0,this._iIntro=0,this.dx=0,this.dy=100,this._tStep=[],this._tStepB=[],this._bMove=!0,this._iTime=0,this._iDelayTime=0,this._iSize=5,this.showSize(),this._iSizeB=5,this.showSizeB(),this.initFood(),0==this._bPlayTime&&this.playTime()},i.prototype.initFood=function(){var t=-(360-this._tFood[0].width/2),i=-(640-this._tFood[0].width/2),o=-2*t,e=-2*i;this._iFood=this._tFood.length;for(var n=0;n<this._iFood;n++){var s=this._tFood[n],r=t+Math.random()*o,h=i+Math.random()*e;s.x=r,s.y=h,s.active=!0;var a=Math.floor(4*Math.random())-1;a=0==a?1:a,s.children[0].getComponent(cc.Label).string=a.toString(),-1==a?s.color=new cc.Color(240,17,17):1==a?s.color=new cc.Color(30,120,30):2==a&&(s.color=new cc.Color(22,17,255))}},i.prototype.playSnakeB=function(){for(var t,i=[],o=0;o<this._tFood.length;o++)t=0==(h=this._tFood[o]).active?1e4:Math.sqrt(Math.pow(h.x-this.snakeB.x,2)+Math.pow(h.y-this.snakeB.y,2)),i.push(t);var e=Math.sqrt(Math.pow(this.snake.x-this.snakeB.x,2)+Math.pow(this.snake.y-this.snakeB.y,2)),n=i[0],s=0;for(o=1;o<i.length;o++)i[o]<n&&(n=i[o],s=o);n>e&&(n=e,s=-1);var r=this.snakeB.getComponent("HeadAI");if(n>200)r.dir=null;else{var h,a=(h=-1!=s?this._tFood[s]:this.snake).position.sub(this.snakeB.position).normalize();r.dir=a}},i.prototype.showSize=function(){this.labSize.string=this._iSize.toString();var t=this._iSize<=1?cc.Color.RED:cc.Color.BLACK;this.labSize.node.color=t},i.prototype.showSizeB=function(){this.labSizeB.string=this._iSizeB.toString();var t=this._iSizeB<=1?cc.Color.RED:cc.Color.BLACK;this.labSizeB.node.color=t},i.prototype.playSPTips=function(t){this.share.active=!0,this.tips.children[0].getComponent(cc.Label).string=t,this.tips.opacity=255},i.prototype.playTips=function(t){this.share.active=!1,this.tips.children[0].getComponent(cc.Label).string=t,this.tips.opacity=255,this.tips.runAction(cc.fadeOut(2))},i.prototype.playTime=function(){this._bPlayTime=!0;var t=this;this.coPlayTime=function(){t.labTime.string=t.getStrTime(++t._iTime),t._iTime>=1800&&(t._bStart=!1,t._bMove=!1,t._bPlayTime=!1,t.playSound("win"),t.playSPTips("\u5927\u795e!\u4f60\u8d62\u4e86"),t.labTime.unschedule(t.coPlayTime))},this.labTime.schedule(this.coPlayTime,1)},i.prototype.getStrTime=function(t){var i,o="",e=[];e[0]=Math.floor(t/60),e[1]=t%60;for(var n=0;n<e.length;n++)o+=(i=e[n])<10?"0"+i.toString():i.toString(),0==n&&(o+=":");return o},i.prototype.playIntro=function(){this.labIntro.string=this.tStr[this._iIntro++],this.sp1.active=!1,this.sp2.active=!1,this.sp3.active=!1,1==this._iIntro?this.sp1.active=!0:2==this._iIntro?this.sp2.active=!0:3==this._iIntro&&(this.sp3.active=!0)},i.prototype.playSound=function(t){switch(t){case"click":case"win":cc.audioEngine.play(this.audioWin,!1,1);case"lose":cc.audioEngine.play(this.audioLose,!1,1)}},i.prototype.onDisable=function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1},i.prototype.onWxEvent=function(t){if(CC_WECHATGAME){var i=this;switch(t){case"initBanner":if(null!=this._bannerAd)this._bannerAd.show();else{var o=wx.getSystemInfoSync();this._bannerAd=wx.createBannerAd({adUnitId:"adunit-20bf80e15edfcc8d",adIntervals:30,style:{left:0,top:o.windowHeight-144,width:720}}),this._bannerAd.onResize(function(){null!=i._bannerAd&&(i._bannerAd.style.top=o.windowHeight-i._bannerAd.style.realHeight)}),this._bannerAd.hide(),this._bannerAd.onError(function(t){console.log(t),t.errCode})}break;case"initVideo":null==this._videoAd&&(this._videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-46847a228f898c70"}),this._videoAd.onClose(function(t){(t&&t.isEnded||void 0===t)&&i.onSurvive()}),this._videoAd.onError(function(t){console.log(t)}));break;case"share":wx.shareAppMessage({title:"\u53ef\u6562\u4e00\u6218\uff01",imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400})});break;case"showVideo":null!=i._videoAd&&i._videoAd.show().catch(function(){i._videoAd.load().then(function(){return i._videoAd.show()})});break;case"initInterstitial":wx.createInterstitialAd&&(this._interstitialAd=wx.createInterstitialAd({adUnitId:"adunit-b25f9ddef42353d0"}));break;case"showInterstitial":this._interstitialAd&&this._interstitialAd.show().catch(function(t){console.error(t)});break;case"jumpToOther":wx.navigateToMiniProgram({appId:"wx4e23a5ec42c5a796",path:"",extraData:{foo:"Snake"},envVersion:"release",success:function(t){console.log("success: ",t)},fail:function(t){console.log("fail: ",t)}})}}},__decorate([s(cc.Node)],i.prototype,"ndJoystick",void 0),__decorate([s(cc.Node)],i.prototype,"ndBg",void 0),__decorate([s(cc.Node)],i.prototype,"goSurvive",void 0),__decorate([s(cc.Node)],i.prototype,"snakeB",void 0),__decorate([s(cc.Node)],i.prototype,"snake",void 0),__decorate([s(cc.Node)],i.prototype,"food",void 0),__decorate([s(cc.Node)],i.prototype,"ball",void 0),__decorate([s(cc.Node)],i.prototype,"tips",void 0),__decorate([s(cc.Node)],i.prototype,"intro",void 0),__decorate([s(cc.Node)],i.prototype,"orient",void 0),__decorate([s(cc.Node)],i.prototype,"share",void 0),__decorate([s(cc.Node)],i.prototype,"sp1",void 0),__decorate([s(cc.Node)],i.prototype,"sp2",void 0),__decorate([s(cc.Node)],i.prototype,"sp3",void 0),__decorate([s(cc.Label)],i.prototype,"labIntro",void 0),__decorate([s(cc.Label)],i.prototype,"labTime",void 0),__decorate([s(cc.Label)],i.prototype,"labSize",void 0),__decorate([s(cc.Label)],i.prototype,"labSizeB",void 0),__decorate([s(cc.AudioSource)],i.prototype,"bgAudio",void 0),__decorate([s({type:cc.AudioClip})],i.prototype,"audioWin",void 0),__decorate([s({type:cc.AudioClip})],i.prototype,"audioLose",void 0),__decorate([n],i)}(cc.Component);o.default=r,cc._RF.pop()},{}],SnakeBall:[function(t,i,o){"use strict";cc._RF.push(i,"d84a0fK0+pC8JFxwm6QACQD","SnakeBall"),Object.defineProperty(o,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,s=e.property,r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ndBg=null,i.ndSnake=null,i.ndBall=null,i._speed=-1e4,i._iScale=1,i}return __extends(i,t),i.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,0),cc.director.getCollisionManager().enabled=!0},i.prototype.onDisable=function(){cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1},i.prototype.start=function(){this.initCanvas(),this.initParas(),this.initEvent(),this.initFood()},i.prototype.update=function(t){if(1==this._isMovable){var i=this.dx*t,o=this.dy*t;this.ndSnake.x+=i,this.ndSnake.y+=o;var e=this.ndSnake.parent.children,n=e.length;if(this._tStep.length>1)for(var s=0;s<n-1;s++){var r=e[s+1],h=this._tStep[s];r.x=h.x,r.y=h.y}this._tStep.unshift({x:this.ndSnake.x,y:this.ndSnake.y}),this._tStep.length>this._iSize&&this._tStep.splice(-1,1)}},i.prototype.initCanvas=function(){var t=this.node.getComponent(cc.Canvas),i=t.designResolution,o=cc.view.getFrameSize(),e=!1;cc.sys.os==cc.sys.OS_IOS?e=414==o.width&&896==o.height||375==o.width&&812==o.height||390==o.width&&844==o.height||428==o.width&&926==o.height:cc.sys.os==cc.sys.OS_ANDROID&&(e=363==o.width&&797==o.height),e?(t.fitWidth=!0,t.fitHeight=!0):o.width/o.height>=i.width/i.height?(t.fitWidth=!1,t.fitHeight=!0):(t.fitWidth=!0,t.fitHeight=!1)},i.prototype.initParas=function(){this.dx=0,this.dy=0,this._isStart=!1,this._isSleep=!1,this._isStop=!0,this._isMovable=!1,this._tStep=[],this._tFood=[];for(var t=cc.find("food",this.ndBg).children,i=0;i<t.length;i++){var o=t[i];o.getComponent("Food").init(this),this._tFood.push(o)}},i.prototype.initEvent=function(){var t=this.ndBg;t.on("touchstart",function(){if(1!=this._bTouch&&0!=this._isStop){this._bTouch=!0;var t=0==this._isStart?this.ndSnake:this.ndBall;this.preX=t.x,this.preY=t.y}},this),t.on("touchmove",function(t){if(0!=this._isStop){var i=0==this._isStart?this.ndSnake:this.ndBall,o=t.touch,e=o._startPoint,n=o._point,s=n.x-e.x,r=n.y-e.y;if(i.x=this.preX+s,i.y=this.preY+r,Math.pow(i.x-this.preX,2)+Math.pow(i.y-this.preY,2)>3600)if(0!=s){var h=r/s;i.x=s/Math.abs(s)*Math.sqrt(3600/(1+h*h)),i.y=h*i.x}else i.x=0,i.y=r/Math.abs(r)*60;1==this._isStart&&(this.dx=s>0?100:-100,this.dy=r>0?100:-100,0==s&&(this.dx=0),0==r&&(this.dy=0),this.dx+=(i.x-this.preX)*(200/60),this.dy+=(i.y-this.preY)*(200/60))}},this),t.on("touchend",function(){if(0!=this._isStop)if(this._bTouch=!1,1==this._isStart)this.ndBall.x=this.preX,this.ndBall.y=this.preY;else{var t=this.ndSnake.getPosition().sub(cc.v2(this.preX,this.preY)).normalize();this.onShooting(t)}},this),t.on("touchcancel",function(){0!=this._isStop&&(this._bTouch=!1,1==this._isStart&&(this.ndBall.x=this.preX,this.ndBall.y=this.preY))},this)},i.prototype.onShooting=function(t){0!=this._isStop&&(this._isStop=!1,this._isStart=!0,this.ndSnake.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(t.x*this._speed,t.y*this._speed),!0))},i.prototype.initFood=function(){var t=-(360-this._tFood[0].width/2),i=-(450-this._tFood[0].width/2),o=-2*t,e=-2*i;this._iFood=this._tFood.length;for(var n=0;n<this._iFood;n++){var s=this._tFood[n],r=t+Math.random()*o,h=i+Math.random()*e;s.x=r,s.y=h,s.active=!0;var a=Math.floor(4*Math.random())-1;a=0==a?1:a,a=1,s.children[0].getComponent(cc.Label).string=a.toString(),-1==a?s.color=new cc.Color(240,17,17):1==a?s.color=new cc.Color(30,120,30):2==a&&(s.color=new cc.Color(22,17,255))}},i.prototype.AEatFood=function(t){this._iSize+=t,this.eatFood(),this.onGrow()},i.prototype.eatFood=function(){this._iFood--,0==this._iFood&&this.initFood()},i.prototype.onGrow=function(){var t=cc.instantiate(this.ndSnake);t.active=!1,this.ndSnake.parent.addChild(t)},__decorate([s(cc.Node)],i.prototype,"ndBg",void 0),__decorate([s(cc.Node)],i.prototype,"ndSnake",void 0),__decorate([s(cc.Node)],i.prototype,"ndBall",void 0),__decorate([n],i)}(cc.Component);o.default=r,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,i){"use strict";cc._RF.push(i,"864e4QGmANKEq3kDk6D1Uj5","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(t,i){"use strict";cc._RF.push(i,"df981yDq2VP/5xwVIuh7ArV","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","use_v2.1.x_cc.Action","Food","Head","HeadAI","Joystick","Main","SnakeBall"]);